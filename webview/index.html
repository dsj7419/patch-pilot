<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PatchPilot</title>
  <style>
    :root {
      --container-padding: 20px;
      --input-padding-vertical: 6px;
      --input-padding-horizontal: 8px;
      --input-margin-vertical: 8px;
      --input-margin-horizontal: 0;
    }

    body {
      padding: 0;
      color: var(--vscode-foreground);
      font-size: var(--vscode-font-size);
      font-weight: var(--vscode-font-weight);
      font-family: var(--vscode-font-family);
      background-color: var(--vscode-editor-background);
    }

    .container {
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      padding: var(--container-padding);
      box-sizing: border-box;
    }

    .header {
      margin-bottom: 20px;
    }

    h1 {
      margin-top: 0;
      margin-bottom: 10px;
      font-weight: 600;
      font-size: 1.5em;
      color: var(--vscode-editor-foreground);
    }

    p {
      margin-top: 0;
      margin-bottom: 10px;
      color: var(--vscode-descriptionForeground);
    }

    .editor-container {
      flex: 1;
      min-height: 200px;
      margin-bottom: 20px;
    }

    #patch-input {
      width: 100%;
      height: 100%;
      min-height: 200px;
      padding: var(--input-padding-vertical) var(--input-padding-horizontal);
      border: 1px solid var(--vscode-input-border);
      background-color: var(--vscode-input-background);
      color: var(--vscode-input-foreground);
      resize: vertical;
      font-family: var(--vscode-editor-font-family);
      font-size: var(--vscode-editor-font-size);
      line-height: 1.5;
    }

    #patch-input:focus {
      outline: 1px solid var(--vscode-focusBorder);
    }

    .preview-container {
      margin-bottom: 20px;
      padding: 10px;
      background-color: var(--vscode-editorWidget-background);
      border: 1px solid var(--vscode-editorWidget-border);
      border-radius: 4px;
    }

    .preview-container h2 {
      margin-top: 0;
      margin-bottom: 10px;
      font-size: 1.2em;
    }

    #file-list {
      margin-top: 10px;
    }

    .file-entry {
      display: flex;
      align-items: center;
      margin-bottom: 5px;
      padding: 5px;
      border-radius: 3px;
    }

    .file-entry:hover {
      background-color: var(--vscode-list-hoverBackground);
    }

    .file-icon {
      margin-right: 8px;
      font-size: 14px;
    }

    .file-path {
      flex: 1;
      font-family: var(--vscode-editor-font-family);
      font-size: var(--vscode-editor-font-size);
    }

    .file-stats {
      white-space: nowrap;
      color: var(--vscode-descriptionForeground);
      font-size: 12px;
    }

    .button-container {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      margin-bottom: 20px;
    }

    .btn {
      padding: 8px 12px;
      font-size: 13px;
      font-weight: 500;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    .btn:focus {
      outline: 1px solid var(--vscode-focusBorder);
    }

    .btn.primary {
      background-color: var(--vscode-button-background);
      color: var(--vscode-button-foreground);
    }

    .btn.primary:hover {
      background-color: var(--vscode-button-hoverBackground);
    }

    .btn.success {
      background-color: var(--vscode-statusBarItem-prominentBackground);
      color: var(--vscode-statusBarItem-prominentForeground);
    }

    .btn.success:hover {
      filter: brightness(1.1);
    }

    .btn.danger {
      background-color: var(--vscode-errorForeground);
      color: white;
    }

    .btn.danger:hover {
      filter: brightness(1.1);
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .status-bar {
      padding: 8px;
      background-color: var(--vscode-statusBar-background);
      color: var(--vscode-statusBar-foreground);
      font-size: 12px;
      border-radius: 4px;
    }

    .success-icon {
      color: var(--vscode-testing-iconPassed);
    }

    .warning-icon {
      color: var(--vscode-testing-iconSkipped);
    }

    .error-icon {
      color: var(--vscode-testing-iconFailed);
    }

    .addition {
      color: var(--vscode-diffEditor-insertedTextBackground);
    }

    .deletion {
      color: var(--vscode-diffEditor-removedTextBackground);
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>PatchPilot: Paste Unified Diff</h1>
      <p>Paste your patch below and click "Preview" to see changes before applying.</p>
    </div>
    
    <div class="git-actions-container" role="group" aria-label="Git actions">
      <h3>Git Actions</h3>
      <div class="git-action-group">
        <label for="branch-name-input">Branch Name (optional):</label>
        <div class="git-action-input-group">
          <input type="text" id="branch-name-input" class="branch-name-input" placeholder="Enter custom branch name">
          <button id="create-branch-btn" class="btn primary">Create Branch</button>
        </div>
      </div>
    </div>

    <div class="editor-container">
      <textarea id="patch-input" placeholder="Paste unified diff here..."></textarea>
    </div>
    
    <div class="preview-container" id="preview-area" style="display:none;">
      <h2>Patch Preview</h2>
      <div id="file-list"></div>
    </div>
    
    <div class="button-container">
      <button id="preview-btn" class="btn primary">Preview</button>
      <button id="apply-btn" class="btn success" disabled>Apply Patch</button>
      <button id="cancel-btn" class="btn danger" disabled>Cancel</button>
    </div>
    
    <div class="status-bar">
      <div id="status-message">Ready to parse your unified diff.</div>
    </div>
  </div>
  
  <script src="main.js"></script>
</body>
</html>